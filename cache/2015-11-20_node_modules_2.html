<!DOCTYPE html><html lang="en"><head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Random thoughts from a random dev">
    <meta name="author" content="Joel Lord">
    <meta name="og:type" content="website">
    <meta name="og:url" content="http://www.javascripteverything.com">
    <meta name="og:title" content="Creating Node Modules" id="ogTitle">
    <meta name="og:description" content="Part 2 - Packaging" id="ogDescription">
    <meta name="og:image" content="http://javascripteverything.com/img/.jpg" id="ogImage">

    <!---â€” twitter card tags additive with the og: tags ---->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:domain" value="javascripteverything.com">
    <meta name="twitter:site" value="@joel__lord">
    <meta name="twitter:creator" value="@joel__lord">
    <meta name="twitter:title" value="Creating Node Modules" id="twitterTitle">
    <meta name="twitter:description" value="Part 2 - Packaging" id="twitterDescription">
    <meta name="twitter:image" content="http://javascripteverything.com/img/.jpg" id="twitterImage">
    <meta name="twitter:url" value="http://javascripteverything.com/" id="twitterUrl">
    <meta name="twitter:label1" value="Next event" id="twitterLabel1">
    <meta name="twitter:data1" value="DevTeach Mtl (July 5th)" id="twitterData1">
    <meta name="twitter:label2" value="Latest blog article" id="twitterLabel2">
    <meta name="twitter:data2" value="Using clusters in Node" id="twitterData2">

    <title>Javascript Everything !</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/clean-blog.css" rel="stylesheet">
    <link href="css/site.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/default.min.css">
    <script async="" src="//www.google-analytics.com/analytics.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-70660833-1', 'auto');
        ga('send', 'pageview');

    </script>
<script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="main" src="js/main.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="start" src="js/start.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="knockout" src="js/libs/knockout.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="components/home-page/home" src="js/components/home-page/home.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="components/about-page/about" src="js/components/about-page/about.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="components/speaking-page/speaking" src="js/components/speaking-page/speaking.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="components/contact-page/contact" src="js/components/contact-page/contact.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="components/blog-page/blog" src="js/components/blog-page/blog.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="components/blog-post-page/blog-post" src="js/components/blog-post-page/blog-post.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="components/blog-all-page/blog-all" src="js/components/blog-all-page/blog-all.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="text" src="js/text.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="jquery" src="js/libs/jquery.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="highlight" src="js/ko_binding_highlight.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="signals" src="js/libs/signals.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="bootstrap" src="js/libs/bootstrap.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="crossroads" src="js/libs/crossroads.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="hasher" src="js/libs/hasher.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="components/nav-bar/nav-bar" src="js/components/nav-bar/nav-bar.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="components/ko-footer/ko-footer" src="js/components/ko-footer/ko-footer.js"></script></head>

<body>

    <!-- ko if: false --><!-- /ko -->

    <nav-bar>
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">#</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="index.html">Home</a>
                </li>
                <li>
                    <a href="about.html">About</a>
                </li>
                <li>
                    <a href="speaking.html">Speaking</a>
                </li>
                <li>
                    <a href="blog.html">Blogging</a>
                </li>
                <li>
                    <a href="contact.html">Contact</a>
                </li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav></nav-bar>


    <!-- ko component: {
      name: route,
      params: params
    } --><!-- Page Header -->
<!-- Set your background image for this header on the line below. -->
<header class="intro-header" data-bind="style: {backgroundImage: bgImg}" style="background-image: url(http://javascripteverything.com/img/post-bg.jpg); ">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading smaller-heading">
                    <h1 data-bind="text: title">Creating Node Modules</h1>
                    <h2 class="subheading" data-bind="text: subtitle">Part 2 - Packaging</h2>
                    <span class="meta">Posted by <a data-bind="attr: {href: authorLink}, text: author" href="about.html">Joel Lord</a> on <span data-bind="text: formattedDate">November 20th, 2015</span></span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1" data-bind="html: postContent, syntaxhighlight: postContent"><p>This is the second part of my "Creating Node modules" series.  If you missed the first part, you can access it <a href="#/blog/post/2015-11-18_node_modules_1">here</a>.</p>

<p>In this section, we will focus on getting the package.json file ready so that you can create your own package and get it ready to be published.</p>

<h2 class="section-heading">What's the package.json</h2>
<p>The package.json is simply a json file that contains all the information about your module.  It will contain the author name and email, the module name, the current version number and most importantly, all the dependencies so that when a user will do a npm install, npm will know what packages to install.</p>

<h2 class="section-heading">Set some defaults</h2>
<p>The first thing you'll want to do is to set some default values for npm.  Those will then be pre-populated in your package.json file.</p>
<p>In a terminal window, enter the following. (You will, obviously, want to change the name by your own name).</p>
<pre class="hljs sql">npm <span class="hljs-operator"><span class="hljs-keyword">set</span> init.author.<span class="hljs-keyword">name</span> <span class="hljs-string">"Joel Lord"</span>
npm <span class="hljs-keyword">set</span> init.author.email <span class="hljs-string">"me@joel-lord.com"</span>
npm <span class="hljs-keyword">set</span> init.author.<span class="hljs-keyword">url</span> <span class="hljs-string">"http://joel-lord.com"</span>
</span></pre>

<p>Once this is done, you will need to create npm user name and password so that you can eventually publish your package.  You can do this by running.</p>
<pre class="hljs coffeescript"><span class="hljs-built_in">npm</span> adduser
</pre>

<h2 class="section-heading">Create the file using npm</h2>
<p>In order to ensure that everyone has more or less the same format for package.json files, npm included a command-line tool to generate this file.  Use npm init and answer the questions to generate your version of the file.</p><p></p>

<pre class="hljs sql">SYS0635:~ jlord$ npm init
This utility will walk you through creating a package.json file.
It only covers the most common items, and tries to guess sensible defaults.

See `npm <span class="hljs-operator"><span class="hljs-keyword">help</span> <span class="hljs-keyword">json</span><span class="hljs-string">` for definitive documentation on these fields
and exactly what they do.

Use `</span>npm <span class="hljs-keyword">install</span> &lt;pkg&gt; <span class="hljs-comment">--save` afterwards to install a package and</span>
<span class="hljs-keyword">save</span> it <span class="hljs-keyword">as</span> a dependency <span class="hljs-keyword">in</span> the <span class="hljs-keyword">package</span>.<span class="hljs-keyword">json</span> <span class="hljs-keyword">file</span>.

Press ^<span class="hljs-keyword">C</span> <span class="hljs-keyword">at</span> <span class="hljs-keyword">any</span> <span class="hljs-keyword">time</span> <span class="hljs-keyword">to</span> quit.
<span class="hljs-keyword">name</span>: (<span class="hljs-number">2015</span>-<span class="hljs-number">11</span>-<span class="hljs-number">18</span>) random-<span class="hljs-built_in">number</span>-gen
<span class="hljs-keyword">version</span>: (<span class="hljs-number">1.0</span><span class="hljs-number">.0</span>) <span class="hljs-number">0.1</span><span class="hljs-number">.0</span>
description: A random <span class="hljs-built_in">number</span> generator <span class="hljs-keyword">with</span> a <span class="hljs-keyword">min</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">max</span> <span class="hljs-keyword">values</span>.
entry point: (<span class="hljs-keyword">index</span>.js) <span class="hljs-keyword">index</span>.js
<span class="hljs-keyword">test</span> command:
git repository:
keywords: random <span class="hljs-built_in">number</span> <span class="hljs-keyword">min</span> <span class="hljs-keyword">max</span>
license: (ISC) MIT
About <span class="hljs-keyword">to</span> write <span class="hljs-keyword">to</span> /<span class="hljs-keyword">Users</span>/jlord/Sites/javascripteverything-<span class="hljs-keyword">old</span>/examples/<span class="hljs-number">2015</span>-<span class="hljs-number">11</span>-<span class="hljs-number">18</span>/<span class="hljs-keyword">package</span>.<span class="hljs-keyword">json</span>:

{
<span class="hljs-string">"name"</span>: <span class="hljs-string">"random-number-gen"</span>,
<span class="hljs-string">"version"</span>: <span class="hljs-string">"0.1.0"</span>,
<span class="hljs-string">"description"</span>: <span class="hljs-string">"A random number generator with a min and max values."</span>,
<span class="hljs-string">"main"</span>: <span class="hljs-string">"index.js"</span>,
<span class="hljs-string">"scripts"</span>: {
<span class="hljs-string">"test"</span>: <span class="hljs-string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span>
},
<span class="hljs-string">"keywords"</span>: [
<span class="hljs-string">"random"</span>,
<span class="hljs-string">"number"</span>,
<span class="hljs-string">"min"</span>,
<span class="hljs-string">"max"</span>
],
<span class="hljs-string">"author"</span>: <span class="hljs-string">"Joel Lord "</span>,
<span class="hljs-string">"license"</span>: <span class="hljs-string">"MIT"</span>
}


<span class="hljs-keyword">Is</span> this ok? (yes) yes
</span></pre>

<p>You now have your packages.json which you will need in order to publish stuff on npm.  You will notice that we left the git repo empty, you can enter your repo url here if you want to.  We also left the test command field empty, we will cover this in part 3 of this series.</p>

<h2 class="section-heading">Other useful npm commands</h2>
<p>Now that you have a package.json, you have to make sure that you keep it up to date.  Failure do to so will result in many frustrations by your users.  Here are a few tricks to makes you that you always keep it up to date.</p><p>

</p><h3 class="section-heading">Adding dependencies</h3>
<p>When you add a new dependency with npm install, always add the --save argument.  This will ensure that this new module you are adding is also added to your package.json dependencies.</p>
<p>Say you wanted to add "yargs" to manage command line options, you should use</p>
<pre class="hljs sql">npm <span class="hljs-operator"><span class="hljs-keyword">install</span> <span class="hljs-comment">--save yargs</span>
</span></pre>
<p>This will add a new line for "yargs" in your package.json as well as install the package as it would normally do with a npm install.</p>

<h3 class="section-heading">Building a new version</h3>
<p>When you prepare a new release, you want to be sure that your version number is also updated so that your users are not confused.  In order to do so, you can use npm version &lt;type&gt; where the type is either patch, minor, or major.  For more information about the meaning of each of the version types, you can check the <a href="http://semver.org/" target="_blank">SemVer guide</a>.  This will also create a git tag for you if you have a git repo initialized.</p>
<pre class="hljs coffeescript"><span class="hljs-built_in">npm</span> version patch
</pre>

<h2 class="section-heading">Next steps</h2>
<p>We are now almost ready to publish a new npm module to npm.  The final step will be to add unit tests to this modules (although, in theory, you should create the test first).  Stay tuned for part 3 of this series.</p></div>
        </div>
    </div>
</article>


<!-- Begin MailChimp Signup Form -->
&lt;<!-- link href="//cdn-images.mailchimp.com/embedcode/slim-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
    #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif;  width:460px;}
    /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
       We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
    <form action="//javascripteverything.us13.list-manage.com/subscribe/post?u=62698acb1ef37ba5d19572fd2&amp;id=d12e1fb4cc" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
        <div id="mc_embed_signup_scroll">
            <label for="mce-EMAIL">Unregular emails, probably no more than once a month, delivered right in your inbox</label>
            <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
            <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_62698acb1ef37ba5d19572fd2_d12e1fb4cc" tabindex="-1" value=""></div>
            <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
        </div>
    </form>
</div> -->

<!--End mc_embed_signup-->
<!-- /ko -->

    <hr>

    <!-- Footer -->
    <ko-footer><footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="http://www.twitter.com/joel__lord" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://ca.linkedin.com/in/joel-lord-9099b232" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                                </span>
                        </a>
                    </li>
                    <li>
                        <a href="http://www.github.com/joellord" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                        </a>
                    </li>
                    <li>
                        <a href="mailto:me@joel-lord.com">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                </ul>
                <p class="copyright text-muted">Copyright Â© Joel Lord <span data-bind="text: year">2016</span></p>
                <p class="copyright text-muted">Built on top of <a href="http://startbootstrap.com/template-overviews/clean-blog/">Clean Blog</a></p>
            </div>
        </div>
    </div>
</footer></ko-footer>


    





</body></html>