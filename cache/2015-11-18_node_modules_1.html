<!DOCTYPE html><html lang="en"><head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Random thoughts from a random dev">
    <meta name="author" content="Joel Lord">
    <meta name="og:type" content="website">
    <meta name="og:url" content="http://www.javascripteverything.com">
    <meta name="og:title" content="Creating Node Modules" id="ogTitle">
    <meta name="og:description" content="Part 1 - Building" id="ogDescription">
    <meta name="og:image" content="http://javascripteverything.com/img/.jpg" id="ogImage">

    <!---â€” twitter card tags additive with the og: tags ---->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:domain" value="javascripteverything.com">
    <meta name="twitter:site" value="@joel__lord">
    <meta name="twitter:creator" value="@joel__lord">
    <meta name="twitter:title" value="Creating Node Modules" id="twitterTitle">
    <meta name="twitter:description" value="Part 1 - Building" id="twitterDescription">
    <meta name="twitter:image" content="http://javascripteverything.com/img/.jpg" id="twitterImage">
    <meta name="twitter:url" value="http://javascripteverything.com/" id="twitterUrl">
    <meta name="twitter:label1" value="Next event" id="twitterLabel1">
    <meta name="twitter:data1" value="DevTeach Mtl (July 5th)" id="twitterData1">
    <meta name="twitter:label2" value="Latest blog article" id="twitterLabel2">
    <meta name="twitter:data2" value="Using clusters in Node" id="twitterData2">

    <title>Javascript Everything !</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/clean-blog.css" rel="stylesheet">
    <link href="css/site.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/default.min.css">
    <script async="" src="//www.google-analytics.com/analytics.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-70660833-1', 'auto');
        ga('send', 'pageview');

    </script>
<script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="main" src="js/main.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="start" src="js/start.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="knockout" src="js/libs/knockout.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="components/home-page/home" src="js/components/home-page/home.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="components/about-page/about" src="js/components/about-page/about.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="components/speaking-page/speaking" src="js/components/speaking-page/speaking.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="components/contact-page/contact" src="js/components/contact-page/contact.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="components/blog-page/blog" src="js/components/blog-page/blog.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="components/blog-post-page/blog-post" src="js/components/blog-post-page/blog-post.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="components/blog-all-page/blog-all" src="js/components/blog-all-page/blog-all.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="text" src="js/text.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="jquery" src="js/libs/jquery.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="highlight" src="js/ko_binding_highlight.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="signals" src="js/libs/signals.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="bootstrap" src="js/libs/bootstrap.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="crossroads" src="js/libs/crossroads.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="hasher" src="js/libs/hasher.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="components/nav-bar/nav-bar" src="js/components/nav-bar/nav-bar.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="components/ko-footer/ko-footer" src="js/components/ko-footer/ko-footer.js"></script></head>

<body>

    <!-- ko if: false --><!-- /ko -->

    <nav-bar>
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">#</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="index.html">Home</a>
                </li>
                <li>
                    <a href="about.html">About</a>
                </li>
                <li>
                    <a href="speaking.html">Speaking</a>
                </li>
                <li>
                    <a href="blog.html">Blogging</a>
                </li>
                <li>
                    <a href="contact.html">Contact</a>
                </li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav></nav-bar>


    <!-- ko component: {
      name: route,
      params: params
    } --><!-- Page Header -->
<!-- Set your background image for this header on the line below. -->
<header class="intro-header" data-bind="style: {backgroundImage: bgImg}" style="background-image: url(http://javascripteverything.com/img/post-bg.jpg); ">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading smaller-heading">
                    <h1 data-bind="text: title">Creating Node Modules</h1>
                    <h2 class="subheading" data-bind="text: subtitle">Part 1 - Building</h2>
                    <span class="meta">Posted by <a data-bind="attr: {href: authorLink}, text: author" href="about.html">Joel Lord</a> on <span data-bind="text: formattedDate">November 18th, 2015</span></span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1" data-bind="html: postContent, syntaxhighlight: postContent"><p>Recently, I published my first modules on <a href="https://www.npmjs.com/package/random-user-generator">npm</a>.  At first, the process was a bit intimidating.  I wasn't sure how to proceed, what to include and so on.  This series of posts will guide you through the process of building and publishing your own npm module.</p>

<h2 class="section-heading">What's a module</h2>
<p>Let's start with the basics.  What exactly is a Node module?  Well, modules are a way to organize your code in units that are easily reusable.  Whatever code you extracted to rewrite as a function is a candidate for a module.  The first thing that you'll need is an idea for a module. In our examples, we create a module that returns random numbers.</p>

<h2 class="section-heading">Creating and including a module</h2>
<p>Node uses <a href="http://www.commonjs.org/specs/modules/1.0/">CommonJS</a> as the pattern for modules.  This means that to include your module, you will need the "require" keyword and inside your module, you will need to "export" your functions.</p>

<pre class="hljs javascript"><span class="hljs-comment">//randomNumber.js</span>
<span class="hljs-comment">//A simple function that returns a random number</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">randomNumber</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.random();
}

<span class="hljs-built_in">module</span>.exports = randomNumber;
</pre>
<pre class="hljs javascript"><span class="hljs-comment">//index.js</span>
<span class="hljs-comment">//Require the randomNumber.js file</span>
<span class="hljs-keyword">var</span> random = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./randomNumer"</span>);
<span class="hljs-comment">//Store a random number in aNumber</span>
<span class="hljs-keyword">var</span> aNumber = random();
<span class="hljs-comment">//Ouput to the console</span>
<span class="hljs-built_in">console</span>.log(aNumber);
</pre>

<p>And that's all you need to create your first node module.  You can now reuse this module in all your projects where you need to return a random number.</p>

<h2 class="section-heading">Going one step further</h2>
<p>In this example, we used a function as the object that was exported by the module.  You could export just about anything.  In the following example, we will show how to export an object that would have private variables</p><p></p>

<pre class="hljs php"><span class="hljs-comment">//randomNumber.js</span>

<span class="hljs-comment">//Create private variables.  Those will not be</span>
<span class="hljs-comment">//accessible by the index.js file</span>
<span class="hljs-keyword">var</span> min, max;
<span class="hljs-keyword">var</span> <span class="hljs-keyword">public</span> = {};

<span class="hljs-comment">//Expose a function to set the minimum random</span>
<span class="hljs-comment">//value</span>
<span class="hljs-keyword">public</span>.setMin = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(value)</span> </span>{
  min = value;
}

<span class="hljs-comment">//Expose a function to set the maximum random</span>
<span class="hljs-comment">//value to be returned</span>
<span class="hljs-keyword">public</span>.setMax = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(value)</span> </span>{
  max = value;
}

<span class="hljs-comment">//Generate a random number between min and max</span>
<span class="hljs-comment">//If no min or max values were defined, the</span>
<span class="hljs-comment">//random number will be between 0 and 100.</span>
<span class="hljs-keyword">public</span>.generate = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-keyword">if</span> (min === undefined) min = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">if</span> (max === undefined) max = <span class="hljs-number">100</span>;
  <span class="hljs-keyword">return</span> (Math.random()*(max-min)) + min;
}

<span class="hljs-comment">//Return the object for use in index</span>
module.exports = <span class="hljs-keyword">public</span>;
</pre>
<pre class="hljs cpp"><span class="hljs-comment">//index.js</span>
<span class="hljs-comment">//Require the module the say way</span>
var random = require(<span class="hljs-string">"./randomNumber"</span>);

<span class="hljs-comment">//Use the object to set min, max and then</span>
<span class="hljs-comment">//generate a new number</span>
random.setMin(<span class="hljs-number">5</span>);
random.setMax(<span class="hljs-number">10</span>);
<span class="hljs-comment">//Output a number between 5 and 10</span>
console.<span class="hljs-built_in">log</span>(random.generate());
<span class="hljs-comment">//Output undefined because min is not</span>
<span class="hljs-comment">//accessible by index</span>
console.<span class="hljs-built_in">log</span>(random.min);
</pre>

<h2 class="section-heading">Your first module</h2>
<p>And that's it !  If you're like me, you can never remember the formula to generate a random number between x and y (or just too lazy to think hard enough to figure it out).  Now you have a module that you can plug in any project to generate this number for you.</p><p>

</p><h2 class="section-heading">Next steps</h2>
<p>In the next posts, I will describe how to test this module and how to use npm to create a package that is ready to get published (<a href="2015-11-20_node_modules_2.html">part 2</a>).</p>
</div>
        </div>
    </div>
</article>


<!-- Begin MailChimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/slim-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
    #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif;  width:460px;}
    /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
       We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
    <form action="//javascripteverything.us13.list-manage.com/subscribe/post?u=62698acb1ef37ba5d19572fd2&amp;id=d12e1fb4cc" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="">
        <div id="mc_embed_signup_scroll">
            <label for="mce-EMAIL">Unregular emails, probably no more than once a month, delivered right in your inbox</label>
            <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required="">
            <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
            <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_62698acb1ef37ba5d19572fd2_d12e1fb4cc" tabindex="-1" value=""></div>
            <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
        </div>
    </form>
</div>

<!--End mc_embed_signup-->
<!-- /ko -->

    <hr>

    <!-- Footer -->
    <ko-footer><footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="http://www.twitter.com/joel__lord" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://ca.linkedin.com/in/joel-lord-9099b232" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                                </span>
                        </a>
                    </li>
                    <li>
                        <a href="http://www.github.com/joellord" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                        </a>
                    </li>
                    <li>
                        <a href="mailto:me@joel-lord.com">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                </ul>
                <p class="copyright text-muted">Copyright Â© Joel Lord <span data-bind="text: year">2016</span></p>
                <p class="copyright text-muted">Built on top of <a href="http://startbootstrap.com/template-overviews/clean-blog/">Clean Blog</a></p>
            </div>
        </div>
    </div>
</footer></ko-footer>


    





</body></html>